# 如何真正流畅的科学上网（全科普）

首先感谢毒药，Sukka等人对部分内容的转载授权。

## 前言

本文主要介绍科学上网相关的一些知识和内容。着重声明请大家合理科学上网，科学上网是用来方便我们科研学习的，包括使用谷歌学术及下载加速等，不要在外网上发布任何政治相关的话题和言论，不要作死，不要没事找事，做一个头脑清醒的中国人，科研为重，好好学习，擦亮眼睛。（本文不要转载到任何校外论坛及其他公共平台，不要脑残，不要脑残，不要脑残）

使用科学上网我们能获得哪些优势呢？

1. 访问一些被墙的网站，使用被墙的各类优质服务
2. 观看不同地区的流媒体，包括Netflix/HBO/Disney+等
3. 下载加速，部分网站虽然能连接上，但是由于163骨干网国际出口拥堵的问题，使用科学上网能提升下载体验，包括但不限于各大论文/文献网站

## 科普

### GFW

GFW，全称Great Fire Wall，也称大防火墙，这个东西没有任何的官方称呼，属于薛定谔的存在，他既有也没有，你认为他有他就有，没有就没有，github上有对应的项目来收集这一些被封禁的网站，建立了一个列表，也就是现在的gfwlist。GFW的存在，是因为我国通过一些手段和方式阻断了部分网站和地址，使得你在上网时无法访问，阻断的方式有很多，从早起的dns投毒到现在的关键字阻断，IP段封禁等。

GFW的建立是在08年前后，当时奥运会期间一些邪教组织在Facebook上策划破坏活动，我国为了维护国家稳定和国家利益，要求Facebook配合调查，但是Facebook以保护用户的隐私权为由拒绝了，同时Google也用同样的理由拒绝了我国的要求。从那时开始，我国就开始完善网络审查制度并开始建墙，慢慢的一些网站就被封禁了，连带着一些色情网站也跟着躺枪。建墙对于我国的发展和国家利益从我看来是利大于弊的，国家为了维稳做出这样的决定也无可厚非，我们要辩证的看待这个问题。同时Facebook/Google拒绝审查也是有一定道理的，你给中国开了这个先河，那之后呢，又会有多少组织和国家找上门要求公开，隐私问题又该怎么解决。虽然Facebook恕我直言就是个垃圾公司，但是对这件事情本身，也是有他们自己的考量在的。

从我的角度来说，墙的存在是利大于弊的，墙被推倒是迟早的事。

### 科学上网主要的一些方式

早期网民的翻墙主要是利用VPN，全称Virtual Private Network，但这种方式由于流量特征比较明显，GFW通过封禁VPN常用的端口阻断了这种方式，想要用的企业或组织全部要报备，审核通过了你才能用。

之后Shadowsocks诞生了，通过在服务器和本地均建立服务，使得过墙的数据全部加密，是现在最安全最稳定的科学上网方式，后面的ShadowsocksR/V2ray/Trojan本质上和SS没有区别，这也是我们现在最常用的方式。简单来说ss翻墙的方式就是通过境外的一台计算机代理你的流量，将他访问被墙网站的信息发送给你，你们之间的通讯都是加密的，以此来绕过GFW的封锁。

基于Shadowsocks的翻墙方式本质上没有优劣之分，但由于部分加密和混淆的差异可能会带来性能上的区别，使得大家觉得他们有一些不同，但合理选择才是最重要的。

#### VPS

VPS，全称Virtual Private Server，主要向各大云服务提供商购买，用来搭建ss server，来作为翻墙服务器，常见的提供商主要有GCP（谷歌），Azure（微软），AWS（亚马逊），阿里云等，一般自购的VPS都是专人专用或者几人拼用，相对稳定性会更好一点，如果自己有一定的Linux基础的话，但是相对的价格比较贵，特别是线路比较好的VPS；维护比较麻烦。

**AWS**

- 亚马逊云计算服务（Amazon Web Services，缩写为AWS），由亚马逊公司所创建的云计算平台，亚马逊AWS占全球云市场第一。
- AWS到联通和移动网速不佳。国际和本地带宽比较稳定。
- 新加坡和日本接了电信163，到电信延时有所改善。但是由于价格便宜，又很容易买到，所以到总体到国内质量还是比较差的。
- 但是由于价格便宜，又很容易买到，所以到总体到国内质量还是比较差的。不过这个价格下能做成这样真的已经非常良心（亏本）了。
- IP被墙重点关照很容易挂，但是浮动IP换起来也很方便。
- 少部分IP段可以看Netflix。

**Azure**

- Microsoft Azure是微软的公用云服务 (Public Cloud Service) 平台，规模仅次于亚马逊AWS。
- Azure 的带宽一般较大，部分实例的带宽可以达到 2Gbps。
- 本地和国际带宽很大很稳，去很多地方都会走自己的骨干网。
- 羊毛目前还是比较多，价格便宜，到国内三大运营商基本上已经被玩坏。到某些地方，如上海阿里云，有奇效，可能走了自己那根沪港骨干。
- 还有个小毛病是播放YouTube的时候会默认走欧洲的CDN，但是速度基本没有影响，Azure是全球内网的自有骨干网的。
- 不能解锁流媒体。

**阿里云**

- 阿里云，创立于2009年，是中国最大的云计算平台，服务范围覆盖全球200多个国家和地区。
- 阿里云香港和新加坡有接CN2、对电信用户来说应该是性价比最高的选择了。联通用户去香港不错，去新加坡绕上海出口。移动到新加坡还行，到香港虽然延迟低但是实测网速很难突破500Kb/S。
- 最大的问题是IP太容易被墙，当然也有很多方式可以降低被墙的概率，这里就不展开细说了。
- 少部分IP段可以看Netflix，其他流媒体服务暂时没测试过。
- 2020年2月份开始没有大带宽带流量包的机器可以买了，性价比不行了已经。个人想买个30M带宽带流量包的也是个不错的选择。

**GCP**

- Google云端平台（Google Cloud Platform）是一项使用了Google核心基础架构、数据分析和机器学习技术的云计算服务。
- 到大陆的互联带宽较小，防御做得也不理想（我觉得这主要是大陆运营商的锅），经常到大陆断网或绕路，稳定性是最大问题。
- 国际带宽非常充裕，有自己的骨干网。
- 最近300美元不能重复撸了，感觉互联直连会有一定的回升。
- 可以解锁Netflix，Youtube Premium

**现在搬瓦工线路已经很差了，就算是CN2 GIA，而且容易被封，不推荐大家购买。如果有一些机场用的是Azure的服务器，而且还给了大流量，那且用且珍惜吧。**

我知道GCP可以白嫖，但这种事情最好少干，用过一年也就知足吧，经常有反复嫖的还要出来和我装逼，本来也不是什么光荣的事情，现在GCP时长已经缩短到3个月了，大家自己心里有数。说句难听的，国人最喜欢干这样的事情，只要有羊毛，就一定会反复薅，薅到秃为止，不要对号入座。

#### 机场

机场主要是指一些个人或者团体向上游供应商购买线路并搭建好服务器，出售给用户来进行科学上网。机场的价格和稳定性取决于其购买的线路，其上游供应商是一级还是二级还是瞎几把买的。机场的水相对更深一点，有大机场也有小机场，一般来说小机场稳定性是不如大机场的，跑路的风险也相对比较高一些，但是现在的大机场其实也是小机场慢慢发展来的，针对机场只有一个提醒：不要把鸡蛋放在同一个篮子里。

### 如何选择合适的机场

#### 线路

一家机场的质量好坏从我的角度来说最重要的就是线路，这里来解释一下一些名词：

##### **CN2**

全称**ChinaNet Next Carrying Network**，中国电信下一代承载网络，由于其搭载了非常优异的QoS，国际出口相比163骨干网要稳定的多。CN2又分为CN2 GIA和CN2 GT，CN2 GIA是全程CN2线路，CN2 GT流量去程走的是CN2线，回程走的是163骨干网，所以CN2 GIA的价格相比GT要贵一些，一些机场线路上会标明走的是不是CN2，但是一般不会明确写出是GIA还是GT，所以要自己注意区分。

##### **IPLC**

全称**International Private Leased Circuit**，国际私有出租线路，也就是我们常说的专线，这个线路价格奇高，动辄几千上万一个月，个人用户是买不起的，土豪和企业专属，想要用线只能选择机场购买的IPLC，也就是和别人合用。这个线路有一个特点——他不过墙，也就是不过GFW的审查，因为IPLC本质上是内网线路。通过内网想要连接互联网还需要把数据转发到公网，举个例子，我和你之间的连接走的是沪港IPLC专线，那么我和你之间的数据是互通的，但是我们都看不了Youtube，还需要把流量转发到公网，这里就扯到了一个很复杂的问题，就是你到IPLC专线的入口和IPLC专线出口到Google的这两段的线路质量，如果你到IPLC的入口需要绕一大圈，那么你就算用了IPLC，那体验也不会很好。

##### **IEPL**

全称**International Ethernet Private Line**，国际以太网专线，和IPLC差不多，区别在于IPLC是通过物理层把两个点连接起来组成的局域网，IEPL是通过数据链路层把点对点或者多点对多点连接起来组成的。其他的性质和IPLC差不多，不多做解释了。

##### **BGP**

全称**Border Gateway Protocol**，边界网关协议，BGP机房也叫多线机房，BGP可以自动识别你的线路是哪家运营商，来选择最适合你的线路连接，同时在某条线路不通的时候，会自动为你切换线路。

#### 机场选择

##### 概述

大机场还是小机场，贵的还是便宜的，其实这就像买商品一样，每个人的选择都不同，看你到底是怎么选择的，但是有一点一定记好，一分钱一分货，贵的一定不会差，便宜的大部分不太好。

大机场呢，相对可能好在开的时间久，用户基数高，跑路风险低，但是也许会碰上人多容易卡的情况，所以要看大机场后续投入带宽能不能承载，看长期测速。但是对于用户来说还有就是可能价钱比较高。

小机场呢，好在初期人比较少，可能速度会更快，而且价钱低，所以看起来比较有吸引力。但是小机场也有很多种可能，因为刚才的优点 “价钱低吸引人”，突然激增很多用户，然后服务器数量少，承载能力一俩月就不行了，都变的很慢很慢的，之前很多机场都是这个规律。

其实有很多中型机场的性价比还是不错的，当时价钱适中，速度也不错，人数也还可以。不过经历过年期间几波封锁，很多原有好用的服务器不能用了，只能加大成本上中转服务器尤其是专线服务器，成本大幅提升，售卖价钱也很多涨了，而且上了中转后承载用户量会相对降低，除非带宽很大，但是成本太高。

还有一点很重要，就是机场节点的连通性。其实用户不要只看速度，因为其实几十 M 就足够我们日常使用了。A 机场 30% 节点能跑满 500M，70% 节点全部瘫痪；B 机场所有节点都能只跑 80M，但是只有 10% 节点不能用，你觉得哪个好呢？其实肯定是 B 机场。平常不要只看速度，我测速也不全是为了速度，其实主要是看一个机场的节点正常率，这个很重要，否则你切换节点经常不能用会很难受。

对机场来说不管哪种专线都没多大区别，体验好不好纯粹取决于买了多少量。影响专线质量的另一个因素是国内接入端和国外段所接入的公网，如果国内直接了一家运营商，那很可能到其他运营商就容易出现网络质量不好的情况。国外端也是同理，国外如果接了一些超便宜的注水运营商的话很可能导致你的数据走专线出去之后堵在专线国外端与落地机这段路上。

##### 部分机场简介

说到机场就不得不提现在御三家——rixcloud（现在的Tempest）、魅影极速、佩奇，这三家都是顶尖的大机场，当然价格也很贵，年付套餐价格在800左右，主要是花卷的IPLC线，花卷科技自己本身不做机场，但是提供线路资源，他家的IPLC线路非常优秀，一般能用上他家的IPLC线的机场质量都是有保障的。

最强机场当然是rixcloud（tempest）这是无疑的，他家的技术力是绝对顶尖的，而且用IDC的资源来做机场，speedtest测速直接就能显示rixcloud的名字，搞得和一个上市公司似的。

魅影极速，简称魅影，他家有一个试验性的小机场叫ARK，有一些新概念的线路，还是挺厉害的。

佩奇家主机场——Nexitally，技术力也不错，机场主比较佛系，线路质量也很OK。

下面提供一些机场的名字（排名按实力分先后，主观排名）以及官网链接（大家有兴趣自己选择测试，部分官网需要翻墙才能连接）：

**我个人不推荐机场，建议各位自己尝试**，我好用的你不一定好用，我不想做这个坏人，真的很想知道哪些比较实惠一点，想省点成本的，站短私信，我看到了随机回复。

RixCloud：https://mcnocean.com/

魅影极速：https://maying.co/

Nexitally：https://nexitallysafe.com/

海豚湾：https://hitun.io/

跑路云：https://paoluz.com/

CNIX（薯条）：https://cnix-gov-cn.com/

Blindload：https://portal.blinkload.zone/

Boslife：https://bgpnet.cc/

羊圈：https://www.mielink.cc/

### 什么是中继/中转节点

三大运营商是付费网间结算，暂时没有免费对等互联。要中继的原因一部分是三大国际出口网络质量不一样，一部分是小运营商几乎没啥国际出口，所以要借助其他表现好的。

**使用场景**

1. 为了改善本地网络（如长城宽带、鹏博士等海外带宽不足的问题）
2. 民用宽带的优先级较低，很容易受到运营商的QoS或干扰，可通过企业宽带或IDC宽带可改善体验
3. 在中继层部署加密隧道防止。。。
4. 机场可通过此手段以达到用户国内带宽统一化管理并提供相对优秀的路由节点

中继分公网中继 / 专线传输。公网就是还走三大统一出国，专线是国内国外两头内网传输。

**用户 -> 国内服务器 A（中继层） -> 服务器 B（落地端）【公网中继】**

![img](https://user-images.githubusercontent.com/34016863/76235799-97221180-6266-11ea-88f8-67005b6a67e4.jpg#vwid=1280&vhei=672)

**用户 -> 服务器 A（专线入口） - 内网传输 -> 服务器 B（专线出口）-> 其他网络 【专线传输，如 rix­Cloud 等几家是当前架构】**

![img](https://user-images.githubusercontent.com/34016863/76235818-9c7f5c00-6266-11ea-8c05-c120f9692c29.jpg#vwid=1280&vhei=604)

**中继节点结构：**

**用户 ------ 中继入口服务器 ------ 中继服务器 2------ 中继服务器 N------ 落地服务器 ------ 用户访问的网站** 用户直接通过代理协议（ss、v2 等），通过公网与中继入口服务器进行通讯。 **一般情况下中继入口是放在国内的，中继的入口到落地之间穿越防火墙的这一段一般会使用一些隧道协议，以实现负载均衡、高可用、防止被墙等效果。** 当然也有一些用单纯的端口转发过墙传输数据的，这种情况比较容易被墙。 中继入口也有可能会通过 IPLC/IEPL 等专线出国，这种情况下连只需进行端口转发也不会被墙。

在性能上，【国内 BGP + 专线出国】优于【国内单线 + 专线出国】、【国内 BGP+CN2 或 9929 出国】优于【国内单线 + CN2 或 9929 出国】、专线优于 CN2 和 9929、国内单线或者 BGP 直接出国方案认为难以长久稳定、直连出国是最差的选择

普通中继 < CN2/9929 < 专线中继

### 机场的TOS/审计规则

其实就是机场对用户的一些行为限制，为了避开审查，或者是维持线路稳定，机场限制了包括但不限于BT下载等服务，不同机场的TOS都不同，这个最好买之前先看一下，避免使用的时候没注意账号被封禁得不偿失。

## 教程

### 工具

#### Shadowsocks/ShadowsocksR/ShadowsocksX/ShadowsocksXR

https://github.com/paradiseduo/ShadowsocksX-NG-R8

https://github.com/HMBSbige/ShadowsocksR-Windows

https://github.com/shadowsocks/shadowsocks-android

#### V2rayN

https://github.com/2dust/v2rayN

https://github.com/2dust/v2rayNG

#### Surge

App Store

#### Shadowrocket

App Store

#### Clash/ClashR/ClashX/ClashXR

https://github.com/Dreamacro/clash

https://github.com/yichengchen/clashX

https://github.com/BoyceLig/ClashR*for*Windows

https://github.com/paradiseduo/ClashXR